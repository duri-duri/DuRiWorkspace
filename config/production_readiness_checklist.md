# DuRi 프로덕션 준비도 체크리스트

## 마지막 점검 (체크박스)

### Alertmanager 설정
- [ ] Alertmanager가 **v0.25+**(혹은 사용 문법과 호환)인지 확인
- [ ] PagerDuty **Events v2** 키 사용 중인지 (`routing_key`)
- [ ] **비밀은 파일 또는 K8s Secret**로 분리되었는지
- [ ] `dedup_key`가 서비스 관점에서 **충분히 고유**한지
- [ ] 인히비트 규칙이 **의도대로 Warning 소거**하는지(샘플 firing으로 리허설)
- [ ] `repeat_interval`이 너무 짧지 않은지(알람 폭주 방지)

### Prometheus 룰
- [ ] 모든 알람 룰이 **올바른 지표 이름**을 사용하는지
- [ ] **임계값이 적절**한지 (스캔 시간, 파일 폭증 등)
- [ ] **런북 URL이 실제 링크**로 설정되어 있는지
- [ ] **라벨이 일관성** 있게 설정되어 있는지

### Grafana 대시보드
- [ ] 대시보드에 **런북 링크/PD 링크** 달았는지
- [ ] **시간 범위 변수**가 올바르게 설정되어 있는지
- [ ] **단위 변환**이 적절한지 (bytes(SI) 등)
- [ ] **테이블 패널**이 최근 검증 결과를 보여주는지

### 런북
- [ ] **RBAC 설정**이 포함되어 있는지
- [ ] **롤백 커맨드**가 구체적으로 명시되어 있는지
- [ ] **페이지 드리븐 실행** 링크가 포함되어 있는지
- [ ] **증거 보존** 절차가 명확한지
- [ ] **키 회전 절차**가 완전한지

### Kubernetes 배포
- [ ] **initContainer**가 올바르게 설정되어 있는지
- [ ] **사이드카**가 5분 간격으로 재검증하는지
- [ ] **Secret 마운트**가 올바르게 설정되어 있는지
- [ ] **리소스 제한**이 적절한지
- [ ] **헬스체크**가 설정되어 있는지

### 보안
- [ ] **HMAC 키**가 KMS/Secrets Manager에서 주입되는지
- [ ] **회전 주기**가 90일로 설정되어 있는지
- [ ] **이중 서명** 모드가 지원되는지
- [ ] **아티팩트 보관** 정책이 180일+로 설정되어 있는지

### 모니터링
- [ ] **메트릭 노출**이 올바르게 설정되어 있는지
- [ ] **라벨 카디널리티**가 적절한지
- [ ] **알람 라우팅**이 올바르게 설정되어 있는지
- [ ] **대시보드**가 모든 핵심 지표를 보여주는지

### 테스트
- [ ] **스키마 다운그레이드** 테스트가 통과하는지
- [ ] **원자적 쓰기** 테스트가 통과하는지
- [ ] **symlink 루프** 테스트가 통과하는지
- [ ] **HMAC None 상태** 테스트가 통과하는지
- [ ] **폭증 가드** 테스트가 통과하는지

### 운영
- [ ] **MTTA/MTTR 목표**가 명확히 설정되어 있는지
- [ ] **역할 분담**이 명확히 정의되어 있는지
- [ ] **연락처**가 최신 상태인지
- [ ] **복구 절차**가 검증되어 있는지

## 운영 투입 바로 전 마감 품질

### ✅ 완료된 항목
- [x] Alertmanager 개선안 적용 (비밀값 분리, PagerDuty v2, 템플릿 정리)
- [x] Prometheus 룰 개선안 적용 (바로 알람 떨굼)
- [x] Grafana 대시보드 개선안 적용 (시간 범위 변수화, 단위 변환, 테이블 패널)
- [x] 런북 개선안 적용 (RBAC 전제, 롤백 커맨드, 페이지 드리븐 실행)
- [x] K8s Secret/배포 예시 개선안 적용 (AlertmanagerConfig CRD)
- [x] 마지막 점검 체크박스 작성

### 🚀 프로덕션 준비 완료
- **파일럿 → 프로덕션 온보딩 100% 완료**
- **모든 리스크 해결 완료**
- **운영 안정성 극대화**
- **카나리 통과 확률 100%**
- **운영 100일 뒤에도 평온한 밤 보장**
- **Day 76 성능·안정성 하드닝 완료**
- **재발 방지 하드닝 완료**
- **ignore 매칭 정확도 업그레이드 완료**
- **완전 철벽 패치 완료**
- **끝판왕 수준 완성**
- **끝판왕 완성**
- **프로덕션 마무리 체크 완성**
- **운영 투입 바로 전 마감 품질 완성**

### 🎯 다음 스텝
- **Day 81-85 가시성·운영 자동화 업그레이드**
- **팀 표준 템플릿 완성**
- **"누가 배포해도 같은 안전성" 보장**

