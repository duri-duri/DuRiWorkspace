groups:
- name: l4-window
  interval: 30s
  rules:
  - record: l4_canon_total_24h
    expr: sum_over_time(l4_canon_total[24h])
  - record: l4_canon_bad_24h
    expr: sum_over_time(l4_canon_bad[24h])
  - record: l4_bad_ratio_24h
    expr: l4_canon_bad_24h / clamp_min(l4_canon_total_24h, 1)
  - record: l4_canon_total_6h
    expr: sum_over_time(l4_canon_total[6h])
  - record: l4_canon_bad_6h
    expr: sum_over_time(l4_canon_bad[6h])
  - record: l4_bad_ratio_6h
    expr: l4_canon_bad_6h / clamp_min(l4_canon_total_6h, 1)
  - record: l4_canon_total_1h
    expr: sum_over_time(l4_canon_total[1h])
  - record: l4_canon_bad_1h
    expr: sum_over_time(l4_canon_bad[1h])
  - record: l4_bad_ratio_1h
    expr: l4_canon_bad_1h / clamp_min(l4_canon_total_1h, 1)

