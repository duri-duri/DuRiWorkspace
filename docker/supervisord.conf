[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid

[program:duri_core]
command=python /app/duri_core/run.py
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/duri_core.err.log
stdout_logfile=/var/log/supervisor/duri_core.out.log
environment=PYTHONPATH="/app:/app/duri_common",PORT="8080"

[program:duri_brain]
command=python /app/duri_brain/run.py
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/duri_brain.err.log
stdout_logfile=/var/log/supervisor/duri_brain.out.log
environment=PYTHONPATH="/app:/app/duri_common",PORT="8081"

[program:duri_evolution]
command=python /app/duri_evolution/run.py
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/duri_evolution.err.log
stdout_logfile=/var/log/supervisor/duri_evolution.out.log
environment=PYTHONPATH="/app:/app/duri_common",PORT="8082"

[program:duri_control]
command=python /app/duri_control/run.py
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/duri_control.err.log
stdout_logfile=/var/log/supervisor/duri_control.out.log
environment=PYTHONPATH="/app:/app/duri_common",PORT="8083",DATABASE_URL="postgresql://duri:duri@localhost:5432/duri"

[program:duri_health_monitor]
command=python /app/duri_control/health_monitor.py
directory=/app
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/health_monitor.err.log
stdout_logfile=/var/log/supervisor/health_monitor.out.log
environment=PYTHONPATH="/app:/app/duri_common"

[group:duri_services]
programs=duri_core,duri_brain,duri_evolution,duri_control,duri_health_monitor
priority=999
