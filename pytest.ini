# pytest.ini
[pytest]
minversion = 7.0
addopts = -ra -q --maxfail=1

# 핵심: 테스트 수집 범위를 명확히 제한
testpaths =
    tests
    scripts/core
    tools

# 테스트 파일 규칙
python_files = test_*.py *_test.py

# 백업/아카이브/실험 폴더 완전 제외 (근본적 해결)
norecursedirs =
    .git .github
    backup backup_repository backups
    duri_archive restored_day* DuRi_Day*
    DuRiCore_backup* DuRiCore/backup_repository*
    build dist venv .venv env
    __pycache__ .pytest_cache

# 성능/벤치마크 테스트 제외 (외부 의존성 요구)
markers =
    perf: performance tests
    slow: slow tests
    integration: integration tests

# 경고 필터링
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# asyncio 모드
asyncio_mode = auto
